<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="Fabrice Lamant">
  <title>Luas</title>

  <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
  <link rel="manifest" href="./site.webmanifest">
  <link rel="mask-icon" href="./safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous" />
  <style>
    div {
      text-align: center;
    }

    table {
      width: 100%;
    }

    td {
      font-family: 'Courier New', Courier, monospace;
    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-3">
        <h2>Spencer Dock</h2>
        <div id="spencer-dock" stop-id="74" stop-direction="1">
        </div>
      </div>
      <div class="col-lg-3">
        <h2>Marlborough</h2>
        <div id="marlborough" stop-id="2839" stop-direction="1">
        </div>
      </div>
      <div class="col-lg-3">
        <h2>Abbey street</h2>
        <div id="abbey-street" stop-id="80" stop-direction="0">
        </div>
      </div>
      <div class="col-lg-3">
        <h2>St Stephen's Green</h2>
        <div id="st-stephens-green" stop-id="104" stop-direction="0">
        </div>
      </div>
    </div>
  </div>

  <script src="../utils.js"></script>
  <script>
    const parser = new DOMParser();

    const loadLuas = (id) => {
      const stop = getElement(id);
      const stopId = stop.getAttribute('stop-id');
      const stopDirection = stop.getAttribute('stop-direction');
      loadUrl(`https://luas.ie/luas-pid.html?stop=${stopId}`, result => {
        const doc = parser.parseFromString(result, "text/html");
        stop.innerHTML = doc.getElementsByClassName('stop-table')[stopDirection].innerHTML;
      });
    };

    loadLuas('spencer-dock');
    loadLuas('marlborough');
    loadLuas('abbey-street');
    loadLuas('st-stephens-green');
  </script>
</body>

</html>